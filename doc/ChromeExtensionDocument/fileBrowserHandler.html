<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="stable/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="stable/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="stable/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <link href="stable/static/css/api.css" rel="stylesheet" type="text/css">
    <title>chrome.fileBrowserHandler - chrome插件中文开发文档(非官方)</title>
  </head>
  <body>
    <a id="top"></a>
    <div id="header">{Header content}</div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome Extensions</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <a href="index.html" title="Google Chrome Extensions home page"><div>Home</div></a>
        </li>
        <li id="docs_link">
          <a href="docs.html" title="Official Google Chrome Extensions documentation"><div>Docs</div></a>
        </li>
        <li id="faq_link">
          <a href="faq.html" title="Answers to frequently asked questions about Google Chrome Extensions"><div>FAQ</div></a>
        </li>
        <li id="samples_link">
          <a href="samples.html" title="Sample Extensions (with source code)"><div>Samples</div></a>
        </li>
        <li id="group_link">
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome Extensions developer forum"><div>Group</div></a>
        </li>
        <li id="so_link">
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <a href="getstarted.html" class="level2 ">Getting Started</a>
          </li>
          <li class="level2">
                <a href="overview.html" class="level2 ">Overview</a>
          </li>
          <li class="level2">
                <a href="whats_new.html" class="level2 ">What's New?</a>
          </li>
          <li class="level2">
                <a href="devguide.html" class="level2 ">Developer's Guide</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">Browser UI</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="browserAction.html" class="level4 ">Browser Actions</a>
                      </li>
                      <li class="level4">
                            <a href="contextMenus.html" class="level4 ">Context Menus</a>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">Desktop Notifications</a>
                      </li>
                      <li class="level4">
                            <a href="omnibox.html" class="level4 ">Omnibox</a>
                      </li>
                      <li class="level4">
                            <a href="options.html" class="level4 ">Options Pages</a>
                      </li>
                      <li class="level4">
                            <a href="override.html" class="level4 ">Override Pages</a>
                      </li>
                      <li class="level4">
                            <a href="pageAction.html" class="level4 ">Page Actions</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">Browser Interaction</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="bookmarks.html" class="level4 ">Bookmarks</a>
                      </li>
                      <li class="level4">
                            <a href="cookies.html" class="level4 ">Cookies</a>
                      </li>
                      <li class="level4">
                            <a href="devtools.html" class="level4 ">Developer Tools</a>
                      </li>
                      <li class="level4">
                            <a href="events.html" class="level4 ">Events</a>
                      </li>
                      <li class="level4">
                            <a href="history.html" class="level4 ">History</a>
                      </li>
                      <li class="level4">
                            <a href="management.html" class="level4 ">Management</a>
                      </li>
                      <li class="level4">
                            <a href="tabs.html" class="level4 ">Tabs</a>
                      </li>
                      <li class="level4">
                            <a href="windows.html" class="level4 ">Windows</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">Implementation</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="a11y.html" class="level4 ">Accessibility</a>
                      </li>
                      <li class="level4">
                            <a href="event_pages.html" class="level4 ">Event Pages</a>
                      </li>
                      <li class="level4">
                            <a href="contentSecurityPolicy.html" class="level4 ">Content Security Policy</a>
                      </li>
                      <li class="level4">
                            <a href="content_scripts.html" class="level4 ">Content Scripts</a>
                      </li>
                      <li class="level4">
                            <a href="xhr.html" class="level4 ">Cross-Origin XHR</a>
                      </li>
                      <li class="level4">
                            <a href="i18n.html" class="level4 ">Internationalization</a>
                      </li>
                      <li class="level4">
                            <a href="messaging.html" class="level4 ">Message Passing</a>
                      </li>
                      <li class="level4">
                            <a href="permissions.html" class="level4 ">Optional Permissions</a>
                      </li>
                      <li class="level4">
                            <a href="npapi.html" class="level4 ">NPAPI Plugins</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">Finishing</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="hosting.html" class="level4 ">Hosting</a>
                      </li>
                      <li class="level4">
                            <a href="external_extensions.html" class="level4 ">Other Deployment Options</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="tutorials.html" class="level2 ">Tutorials</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="tut_migration_to_manifest_v2.html" class="level3 ">Manifest V2</a>
                </li>
                <li class="level3">
                      <a href="tut_debugging.html" class="level3 ">Debugging</a>
                </li>
                <li class="level3">
                      <a href="tut_analytics.html" class="level3 ">Google Analytics</a>
                </li>
                <li class="level3">
                      <a href="tut_oauth.html" class="level3 ">OAuth</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">Reference</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">Formats</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="manifest.html" class="level4 ">Manifest Files</a>
                      </li>
                      <li class="level4">
                            <a href="match_patterns.html" class="level4 ">Match Patterns</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                      <a href="permission_warnings.html" class="level3 ">Permission Warnings</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">chrome.* APIs</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">Other APIs</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">More</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="http://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome Web Store</a>
                </li>
                <li class="level3">
                      <a href="http://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">Hosted Apps</a>
                </li>
                <li class="level3">
                      <a href="themes.html" class="level3 ">Themes</a>
                </li>
              </ul>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">chrome.fileBrowserHandler</h1>
        
        
        
        <div id="toc">
          <h2>Contents</h2>
          <ol>
            <li>
              <a href=#manifest>Manifest</a>
            </li>
            <li>
              <a href=#code>Implementing a file browser handler</a>
            </li>
            <li>
              <a href="#apiReference">API reference: chrome.fileBrowserHandler</a>
              <ol>
                  <li><a href="#types">Types</a><ol>  <li>    <a href="#type-FileHandlerExecuteEventDetails">FileHandlerExecuteEventDetails</a>  </li></ol></li>
                  
                  <li><a href="#methods">Methods</a><ol>  <li><a href="#method-selectFile">selectFile</a></li></ol></li>
                  <li><a href="#events">Events</a><ol>  <li><a href="#event-onExecute">onExecute</a></li></ol></li>
                  
              </ol>
            </li>
          </ol>
        </div>

<p id="classSummary">
Use the <code>chrome.fileBrowserHandler</code> module to
extend the Chrome OS file browser.
For example, you can use this API
to enable users to upload files to your website.
</p>

<p class="caution">
<b>Important:</b>
This API works <b>only on Chrome OS</b>.
</p>

<p>
The Chrome OS file browser comes up when
the user either presses Ctrl+M
or connects an external storage device,
such as an SD card, USB key, external drive, or digital camera.
Besides showing the files on external devices,
the file browser can also display files
that the user has previously saved to the system.
</p>

<p>
When the user selects one or more files,
the file browser adds buttons
representing the valid handlers for those files.
For example, in the following screenshot,
selecting a file with a ".jpg" suffix
results in an "Upload to Picasa" button that the user can click.
</p>

<p>
<img src="stable/static/images/filebrowserhandler.png"
  width="640" height="400" alt="file browser screenshot" />
</p>


<h2 id="manifest">Manifest</h2>

<p>
You must declare the "fileBrowserHandler" permission
in the <a href="manifest.html">extension manifest</a>,
and you must use the "file_browser_handlers" field
to register the extension as a handler of at least one file type.
You should also provide a 16x16 icon
to be displayed on the button.
For example:
</p>

<pre>
{
  "name": "My extension",
  ...
  <b>"file_browser_handlers"</b>: [
    {
      <b>"id"</b>: "upload",
      <b>"default_title"</b>: "Save to Gallery", <em>// What the button will display</em>
      <b>"file_filters"</b>: [
        "filesystem:*.jpg", <em>// To match all files, use "filesystem:*.*"</em>
        "filesystem:*.jpeg",
        "filesystem:*.png"
      ]
    }
  ]</b>,
  "permissions" : [
    <b>"fileBrowserHandler"</b>
  ],
  "icons": { <b>"16"</b>: "icon16.png",
             "48": "icon48.png",
            "128": "icon128.png" },
  ...
}</pre>

<p class="note">
<b>Note:</b>
You can specify locale-specific strings for the value of "default_title".
See <a href="i18n.html">Internationalization (i18n)</a> for details.
</p>

<h2 id="code">Implementing a file browser handler</h2>

<p>
To use this API,
you must implement a function that handles the <code>onExecute</code> event
of <code>chrome.fileBrowserHandler</code>.
Your function will be called whenever the user clicks the button
that represents your file browser handler.
In your function, use the HTML5
<a href="http://www.html5rocks.com/tutorials/file/filesystem/">FileSystem API</a>
to get access to the file contents.
Here is an example:
</p>

<pre>
<em>//In background.html:</em>
chrome.fileBrowserHandler.onExecute.addListener(function(id, details) {
  if (id == 'upload') {
    var fileEntries = details.entries;
    for (var i = 0, entry; entry = fileEntries[i]; ++i) {
      entry.file(function(file) {
        <em>// send file somewhere</em>
      });
    }
  }
});
</pre>

<p>
Your event handler is passed two arguments:
</p>

<dl>
  <dt> id </dt>
  <dd> The "id" value from the manifest file.
       If your extension implements multiple handlers,
       you can check the <code>id</code> value
       to see which handler has been triggered.
       </dd>
  <dt> details </dt>
  <dd> An object describing the event.
       You can get the file or files that the user has selected
       from the <code>entries</code> field of this object,
       which is an array of
       FileSystem <code>Entry</code> objects.
       </dd>
</p>


<!--
<h2 id="manifest_details">Manifest details</h2>

<p class="authornote">
{PENDING: give details about "id" and "default_title".
It should be unique within your extension -- don't worry about other extensions.
"default_title" implies that you can change the title,
but you can't aside from internationalizing it.
</p>

<p class="authornote">
{PENDING: give details about the file_filters entry.
File filters are currently case-sensitive, but we plan to change that.
Mention <code>filesystem:*.*</code>.
</p>
-->

<!--
<h2 id="examples">Examples</h2>

<p>
For examples of using this API, see ...
For other examples and for help in viewing the source code, see
<a href="samples.html">Samples</a>.
</p>
-->
        <h2 id="apiReference">API Reference: chrome.fileBrowserHandler</h2>
        <div class="api_reference">
            <h3 id="types">Types</h3>
              <div>
                <h3 id="type-FileHandlerExecuteEventDetails">FileHandlerExecuteEventDetails</h3>
                <div>
                  <dt><span class="type_name">  (    <span id="typeTemplate">object</span>  )</span></dt>
              <dd>
                    Event details payload for fileBrowserHandler.onExecute event.
                  </dd>    <h4 id="FileHandlerExecuteEventDetails-properties">
                    Properties of <a href="#type-FileHandlerExecuteEventDetails">FileHandlerExecuteEventDetails</a>
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-FileHandlerExecuteEventDetails-entries"></a>
                      <dt>
                        <span class="variable">entries</span>
                        <span class="property">
                          (
                            
                            <span id="typeTemplate">array of any</span>
                          )
                        </span>
                      </dt>
                      <dd>
                        Array of Entry instances representing files that are targets of this action (selected in ChromeOS file browser).
                      </dd>
                    </div>
                    <div>
                      <a name="property-FileHandlerExecuteEventDetails-tab_id"></a>
                      <dt>
                        <span class="variable">tab_id</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <span id="typeTemplate">integer</span>
                          )
                        </span>
                      </dt>
                      <dd>
                        The ID of the tab that raised this event. Tab IDs are unique within a browser session.
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
            <h3 id="methods">Methods</h3>
              <div>
                <h4 id="method-selectFile">selectFile</h4>
                <div class="summary lower">
                  <span>chrome.fileBrowserHandler.selectFile</span>(<span>object <span class="variable">selectionParams</span></span>)
                </div>
                <div class="description">
              <p>
                    Prompts user to select file path under which file should be saved. When the file is selected, file access permission required to use the file (read, write and create) are granted to the caller. The file will not actually get created during the functin call, so function caller must ensure its existance before using it. The function has to be invoked with a user gesture.
                  </p>    <h4>Parameters</h4>
                  <dl>
                    <div>  <a name="property-selectFile-selectionParams"></a>  <dt>    <span class="variable">selectionParams</span>    <span class="property">      (                <span id="typeTemplate">object</span>      )    </span>  </dt>  <dd>    Parameters that will be used while selecting the file.  </dd>  <dd>    <dl>      <div>        <a name="property-selectionParams-suggestedName"></a>        <dt>          <span class="variable">suggestedName</span>          <span class="property">            (                            <span id="typeTemplate">string</span>            )          </span>        </dt>        <dd>          Suggested name for the file.        </dd>      </div>      <div>        <a name="property-selectionParams-allowedFileExtensions"></a>        <dt>          <span class="variable">allowedFileExtensions</span>          <span class="property">            (              <span class="optional">optional</span>              <span id="typeTemplate">array of string</span>            )          </span>        </dt>        <dd>          List of file extensions that the selected file can have. The list is also used to specify what files to be shown in the select file dialog. Files with the listed extensions are only shown in the dialog. Extensions should not include the leading '.'. Example: ['jpg', 'png']        </dd>      </div>    </dl>  </dd></div>
                  </dl>
                  <h4>Callback function</h4><p>      The <em>callback</em> parameter should specify a function      that looks like this:</p><pre>function(object result) <span class="subdued">{...}</span>;</pre><dl>  <div>  <a name="property-callback-result"></a>  <dt>    <span class="variable">result</span>    <span class="property">      (                <span id="typeTemplate">object</span>      )    </span>  </dt>  <dd>    Result of the method.  </dd>  <dd>    <dl>      <div>        <a name="property-result-success"></a>        <dt>          <span class="variable">success</span>          <span class="property">            (                            <span id="typeTemplate">boolean</span>            )          </span>        </dt>        <dd>          Whether the file has been selected.        </dd>      </div>      <div>        <a name="property-result-entry"></a>        <dt>          <span class="variable">entry</span>          <span class="property">            (              <span class="optional">optional</span>              <span id="typeTemplate">object</span>            )          </span>        </dt>        <dd>          Selected file entry. It will be null if a file hasn't been selected.        </dd>      </div>    </dl>  </dd></div></dl>
                </div>
              </div>
            <h3 id="events">Events</h3>
              <div>
                <h4 id="event-onExecute">onExecute</h4>
                <div class="summary">
                  <span class="subdued">chrome.fileBrowserHandler.</span>onExecute<span class="subdued">.addListener</span>(function(<span>string <span class="variable">id</span></span>, <span><a href="fileBrowserHandler.html#type-FileHandlerExecuteEventDetails">FileHandlerExecuteEventDetails</a> <span class="variable">details</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    Fired when file system action is executed from ChromeOS file browser.
                  </p>      <h4>Listener Parameters</h4>
                    <dl>
                      <div>  <a name="property-onExecute-id"></a>  <dt>    <span class="variable">id</span>    <span class="property">      (                <span id="typeTemplate">string</span>      )    </span>  </dt>  <dd>    File browser action id as specified in the listener component's manifest.  </dd></div><div>  <a name="property-onExecute-details"></a>  <dt>    <span class="variable">details</span>    <span class="property">      (                <span id="typeTemplate"><a href="fileBrowserHandler.html#type-FileHandlerExecuteEventDetails">FileHandlerExecuteEventDetails</a></span>      )    </span>  </dt>  <dd>    File handler execute event details.  </dd></div>
                    </dl>
                </div>
              </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"bookmarks"},{"name":"browserAction"},{"name":"browsingData"},{"name":"commands"},{"name":"contentSettings"},{"name":"contextMenus"},{"name":"cookies"},{"name":"debugger"},{"name":"declarativeWebRequest"},{"name":"devtools.inspectedWindow"},{"name":"devtools.network"},{"name":"devtools.panels"},{"name":"downloads"},{"name":"events"},{"name":"extension"},{"name":"fileBrowserHandler"},{"name":"fontSettings"},{"name":"history"},{"name":"i18n"},{"name":"idle"},{"name":"input.ime"},{"name":"management"},{"name":"omnibox"},{"name":"pageAction"},{"name":"pageCapture"},{"name":"permissions"},{"name":"privacy"},{"name":"proxy"},{"name":"runtime"},{"name":"scriptBadge"},{"name":"storage"},{"name":"tabs"},{"name":"topSites"},{"name":"tts"},{"name":"ttsEngine"},{"name":"types"},{"name":"webNavigation"},{"name":"webRequest"},{"name":"webstore"},{"last":true,"name":"windows"}].concat(
          [{"name":"experimental.bluetooth"},{"name":"experimental.devtools.audits"},{"name":"experimental.devtools.console"},{"name":"experimental.discovery"},{"name":"experimental.identity"},{"name":"experimental.infobars"},{"name":"experimental.offscreenTabs"},{"name":"experimental.processes"},{"name":"experimental.record"},{"name":"experimental.speechInput"},{"name":"experimental.systemInfo.cpu"},{"name":"experimental.systemInfo.storage"},{"last":true,"name":"experimental.usb"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"stable","showWarning":false}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.
      </p>
      <p>
        ©2012 Google
      </p>
      <script src="stable/static/js/branch.js" type="text/javascript"></script>
      <script src="stable/static/js/sidebar.js" type="text/javascript"></script>
      <script src="stable/static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <div id="footer_cus">{Footer}</div><script src="Libs/Yixi.js"></script><script src="http://s9.cnzz.com/stat.php?id=4928336&web_id=4928336" language="JavaScript"></script>
  
    </div>
  </div>
</html>
